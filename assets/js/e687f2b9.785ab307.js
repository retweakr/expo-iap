"use strict";(globalThis.webpackChunkexpo_iap_docs=globalThis.webpackChunkexpo_iap_docs||[]).push([[1710],{571:(e,r,n)=>{n.d(r,{A:()=>d});var o=n(6540),s=n(4848);function i({className:e="adfit",style:r,unit:n,height:i,width:d}){return(0,o.useEffect)(()=>{const r=setTimeout(()=>{const r=document.querySelector(`.${e}`);if(!r)return void console.warn(`AdFit: Element with class "${e}" not found`);const o=r.querySelectorAll(".kakao_ad_area"),s=r.querySelectorAll('script[src*="kas/static/ba.min.js"]');o.forEach(e=>e.remove()),s.forEach(e=>e.remove());const t=document.createElement("ins"),l=document.createElement("script");t.className="kakao_ad_area",t.style.cssText="display:none; width:100%;",l.async=!0,l.type="text/javascript",l.src="//t1.daumcdn.net/kas/static/ba.min.js",t.setAttribute("data-ad-width",d.toString()),t.setAttribute("data-ad-height",i.toString()),t.setAttribute("data-ad-unit",n),r.appendChild(t),r.appendChild(l)},100);return()=>clearTimeout(r)},[e,n,i,d]),(0,s.jsx)("div",{style:r,children:(0,s.jsx)("div",{className:e})})}function d(){return(0,s.jsx)(i,{unit:"DAN-YTmjDwlbcP42HBg6",height:100,width:320,className:"adfit-top",style:{flex:1,marginTop:24,marginBottom:24}})}},4516:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>c,contentTitle:()=>l,default:()=>p,frontMatter:()=>t,metadata:()=>o,toc:()=>a});const o=JSON.parse('{"id":"api/error-codes","title":"Error Codes","description":"React Native IAP provides a centralized error handling system with platform-specific error code mapping. This ensures consistent error handling across iOS and Android platforms.","source":"@site/docs/api/error-codes.md","sourceDirName":"api","slug":"/api/error-codes","permalink":"/expo-iap/docs/api/error-codes","draft":false,"unlisted":false,"editUrl":"https://github.com/hyochan/expo-iap/tree/main/docs/docs/api/error-codes.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Error Handling","permalink":"/expo-iap/docs/api/error-handling"},"next":{"title":"Purchase Flow","permalink":"/expo-iap/docs/examples/purchase-flow"}}');var s=n(4848),i=n(8453),d=n(571);const t={sidebar_position:2},l="Error Codes",c={},a=[{value:"Error Code Enum",id:"error-code-enum",level:2},{value:"ErrorCode",id:"errorcode",level:3},{value:"PurchaseError",id:"purchaseerror",level:2},{value:"createPurchaseError",id:"createpurchaseerror",level:3},{value:"createPurchaseErrorFromPlatform",id:"createpurchaseerrorfromplatform",level:3},{value:"ErrorCodeUtils",id:"errorcodeutils",level:2},{value:"getNativeErrorCode",id:"getnativeerrorcode",level:3},{value:"fromPlatformCode",id:"fromplatformcode",level:3},{value:"toPlatformCode",id:"toplatformcode",level:3},{value:"isValidForPlatform",id:"isvalidforplatform",level:3},{value:"Error Helper Functions",id:"error-helper-functions",level:2},{value:"isUserCancelledError",id:"isusercancellederror",level:3},{value:"isNetworkError",id:"isnetworkerror",level:3},{value:"isRecoverableError",id:"isrecoverableerror",level:3},{value:"getUserFriendlyErrorMessage",id:"getuserfriendlyerrormessage",level:3},{value:"User-Friendly Error Messages",id:"user-friendly-error-messages",level:2},{value:"See Also",id:"see-also",level:2}];function h(e){const r={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.header,{children:(0,s.jsx)(r.h1,{id:"error-codes",children:"Error Codes"})}),"\n",(0,s.jsx)(d.A,{}),"\n",(0,s.jsx)(r.p,{children:"React Native IAP provides a centralized error handling system with platform-specific error code mapping. This ensures consistent error handling across iOS and Android platforms."}),"\n",(0,s.jsx)(r.h2,{id:"error-code-enum",children:"Error Code Enum"}),"\n",(0,s.jsx)(r.h3,{id:"errorcode",children:"ErrorCode"}),"\n",(0,s.jsxs)(r.p,{children:["The ",(0,s.jsx)(r.code,{children:"ErrorCode"})," enum provides standardized error codes that map to platform-specific errors:"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-tsx",children:"import {ErrorCode} from 'react-native-iap';\n\nexport enum ErrorCode {\n  Unknown = 'unknown',\n  UserCancelled = 'user-cancelled',\n  UserError = 'user-error',\n  ItemUnavailable = 'item-unavailable',\n  RemoteError = 'remote-error',\n  NetworkError = 'network-error',\n  ServiceError = 'service-error',\n  ReceiptFailed = 'receipt-failed',\n  ReceiptFinished = 'receipt-finished',\n  ReceiptFinishedFailed = 'receipt-finished-failed',\n  NotPrepared = 'not-prepared',\n  NotEnded = 'not-ended',\n  AlreadyOwned = 'already-owned',\n  DeveloperError = 'developer-error',\n  BillingResponseJsonParseError = 'billing-response-json-parse-error',\n  DeferredPayment = 'deferred-payment',\n  Interrupted = 'interrupted',\n  IapNotAvailable = 'iap-not-available',\n  PurchaseError = 'purchase-error',\n  SyncError = 'sync-error',\n  TransactionValidationFailed = 'transaction-validation-failed',\n  ActivityUnavailable = 'activity-unavailable',\n  AlreadyPrepared = 'already-prepared',\n  Pending = 'pending',\n  ConnectionClosed = 'connection-closed',\n  InitConnection = 'init-connection',\n  ServiceDisconnected = 'service-disconnected',\n  QueryProduct = 'query-product',\n  SkuNotFound = 'sku-not-found',\n  SkuOfferMismatch = 'sku-offer-mismatch',\n  ItemNotOwned = 'item-not-owned',\n  BillingUnavailable = 'billing-unavailable',\n  FeatureNotSupported = 'feature-not-supported',\n  EmptySkuList = 'empty-sku-list',\n}\n"})}),"\n",(0,s.jsx)(r.h2,{id:"purchaseerror",children:"PurchaseError"}),"\n",(0,s.jsx)(r.p,{children:"A custom error class for purchase-related errors."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-tsx",children:"export interface PurchaseErrorProps {\n  message: string;\n  responseCode?: number;\n  debugMessage?: string;\n  code?: ErrorCode;\n  productId?: string;\n  platform?: IapPlatform;\n}\n\nexport type PurchaseError = Error & PurchaseErrorProps;\n"})}),"\n",(0,s.jsx)(r.h3,{id:"createpurchaseerror",children:"createPurchaseError"}),"\n",(0,s.jsxs)(r.p,{children:["Creates a ",(0,s.jsx)(r.code,{children:"PurchaseError"})," instance."]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-tsx",children:"export const createPurchaseError = (\n  props: PurchaseErrorProps,\n): PurchaseError => {\n  // ...\n};\n"})}),"\n",(0,s.jsx)(r.h3,{id:"createpurchaseerrorfromplatform",children:"createPurchaseErrorFromPlatform"}),"\n",(0,s.jsxs)(r.p,{children:["Creates a ",(0,s.jsx)(r.code,{children:"PurchaseError"})," from platform-specific error data."]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-tsx",children:"export const createPurchaseErrorFromPlatform = (\n  errorData: PurchaseErrorProps,\n  platform: IapPlatform,\n): PurchaseError => {\n  // ...\n};\n"})}),"\n",(0,s.jsx)(r.h2,{id:"errorcodeutils",children:"ErrorCodeUtils"}),"\n",(0,s.jsx)(r.p,{children:"Utility functions for error code mapping and validation."}),"\n",(0,s.jsx)(r.h3,{id:"getnativeerrorcode",children:"getNativeErrorCode"}),"\n",(0,s.jsx)(r.p,{children:"Gets the native error code for the current platform:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-tsx",children:"ErrorCodeUtils.getNativeErrorCode(errorCode: ErrorCode): string\n"})}),"\n",(0,s.jsx)(r.h3,{id:"fromplatformcode",children:"fromPlatformCode"}),"\n",(0,s.jsx)(r.p,{children:"Maps platform-specific error code to standardized ErrorCode:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-tsx",children:"ErrorCodeUtils.fromPlatformCode(\n  platformCode: string | number,\n  platform?: IapPlatform,\n): ErrorCode\n"})}),"\n",(0,s.jsx)(r.h3,{id:"toplatformcode",children:"toPlatformCode"}),"\n",(0,s.jsx)(r.p,{children:"Maps ErrorCode to platform-specific code:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-tsx",children:"ErrorCodeUtils.toPlatformCode(\n  errorCode: ErrorCode,\n  platform?: IapPlatform,\n): string | number\n"})}),"\n",(0,s.jsx)(r.h3,{id:"isvalidforplatform",children:"isValidForPlatform"}),"\n",(0,s.jsx)(r.p,{children:"Checks if error code is valid for the specified platform:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-tsx",children:"ErrorCodeUtils.isValidForPlatform(\n  errorCode: ErrorCode,\n  platform: IapPlatform,\n): boolean\n"})}),"\n",(0,s.jsx)(r.h2,{id:"error-helper-functions",children:"Error Helper Functions"}),"\n",(0,s.jsx)(r.p,{children:"These functions help interpret error objects."}),"\n",(0,s.jsx)(r.h3,{id:"isusercancellederror",children:"isUserCancelledError"}),"\n",(0,s.jsxs)(r.p,{children:["Returns ",(0,s.jsx)(r.code,{children:"true"})," if the error is a user cancellation error."]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-tsx",children:"export function isUserCancelledError(error: unknown): boolean;\n"})}),"\n",(0,s.jsx)(r.h3,{id:"isnetworkerror",children:"isNetworkError"}),"\n",(0,s.jsxs)(r.p,{children:["Returns ",(0,s.jsx)(r.code,{children:"true"})," if the error is a network-related error."]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-tsx",children:"export function isNetworkError(error: unknown): boolean;\n"})}),"\n",(0,s.jsx)(r.h3,{id:"isrecoverableerror",children:"isRecoverableError"}),"\n",(0,s.jsxs)(r.p,{children:["Returns ",(0,s.jsx)(r.code,{children:"true"})," if the error is a recoverable error."]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-tsx",children:"export function isRecoverableError(error: unknown): boolean;\n"})}),"\n",(0,s.jsx)(r.h3,{id:"getuserfriendlyerrormessage",children:"getUserFriendlyErrorMessage"}),"\n",(0,s.jsx)(r.p,{children:"Returns a user-friendly error message for a given error."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-tsx",children:"export function getUserFriendlyErrorMessage(error: ErrorLike): string;\n"})}),"\n",(0,s.jsx)(r.h2,{id:"user-friendly-error-messages",children:"User-Friendly Error Messages"}),"\n",(0,s.jsxs)(r.p,{children:["The ",(0,s.jsx)(r.code,{children:"getUserFriendlyErrorMessage"})," function provides localized and user-friendly messages for common errors."]}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"ErrorCode"}),(0,s.jsx)(r.th,{children:"Message"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"UserCancelled"})}),(0,s.jsx)(r.td,{children:"'Purchase cancelled'"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"NetworkError"})}),(0,s.jsx)(r.td,{children:"'Network connection error. Please check your internet connection and try again.'"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"ReceiptFinished"})}),(0,s.jsx)(r.td,{children:"'Receipt already finished'"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"ServiceDisconnected"})}),(0,s.jsx)(r.td,{children:"'Billing service disconnected. Please try again.'"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"BillingUnavailable"})}),(0,s.jsx)(r.td,{children:"'Billing is unavailable on this device or account.'"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"ItemUnavailable"})}),(0,s.jsx)(r.td,{children:"'This item is not available for purchase'"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"ItemNotOwned"})}),(0,s.jsx)(r.td,{children:'"You don\'t own this item"'})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"AlreadyOwned"})}),(0,s.jsx)(r.td,{children:"'You already own this item'"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"SkuNotFound"})}),(0,s.jsx)(r.td,{children:"'Requested product could not be found'"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"SkuOfferMismatch"})}),(0,s.jsx)(r.td,{children:"'Selected offer does not match the SKU'"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"DeferredPayment"})}),(0,s.jsx)(r.td,{children:"'Payment is pending approval'"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"NotPrepared"})}),(0,s.jsx)(r.td,{children:"'In-app purchase is not ready. Please try again later.'"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"ServiceError"})}),(0,s.jsx)(r.td,{children:"'Store service error. Please try again later.'"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"FeatureNotSupported"})}),(0,s.jsx)(r.td,{children:"'This feature is not supported on this device.'"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"TransactionValidationFailed"})}),(0,s.jsx)(r.td,{children:"'Transaction could not be verified'"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"ReceiptFailed"})}),(0,s.jsx)(r.td,{children:"'Receipt processing failed'"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"EmptySkuList"})}),(0,s.jsx)(r.td,{children:"'No product IDs provided'"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"InitConnection"})}),(0,s.jsx)(r.td,{children:"'Failed to initialize billing connection'"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"QueryProduct"})}),(0,s.jsx)(r.td,{children:"'Failed to query products. Please try again later.'"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.em,{children:"default"})}),(0,s.jsx)(r.td,{children:"'An unexpected error occurred'"})]})]})]}),"\n",(0,s.jsx)(r.h2,{id:"see-also",children:"See Also"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"../guides/error-handling",children:"Error Handling Guide"})}),"\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"./use-iap",children:"useIAP Hook"})}),"\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"./types",children:"Types Reference"})}),"\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"../guides/troubleshooting",children:"Troubleshooting"})}),"\n"]})]})}function p(e={}){const{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},8453:(e,r,n)=>{n.d(r,{R:()=>d,x:()=>t});var o=n(6540);const s={},i=o.createContext(s);function d(e){const r=o.useContext(i);return o.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function t(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:d(e.components),o.createElement(i.Provider,{value:r},e.children)}}}]);